<!doctype html>
<html lang="en">

<head>
  <title>{{ doc_title | default("esparto-doc", true) }}</title>
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“Š</text></svg>">
  <!-- Meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  {% if head_deps is defined and head_deps|length %}
  <!-- Bootstrap CSS and JavaScript Dependencies -->
  {% for dep in head_deps %}
  {{ dep }}
  {% endfor %}
  {% endif %}

  {% if esparto_css %}
  <!-- Esparto CSS -->
  <style>
  {{ esparto_css }}
  </style>
  {% endif %}
</head>

<body>
  <!-- Header -->
  <nav class="navbar d-flex navbar-expand-md navbar-light bg-light mb-3 d-print-none" width="100vw" style="padding: 0; min-height: 1.2rem;">
      <a class="navbar-brand" style="margin-left: 10vw; padding: 0; font-size: 1rem;" href="#">{{ navbrand }}</a>
  </nav>

  <!-- Content -->
  <main class="container" style="min-height: 100vh;">
  {{ content }}
  </main>

  <!-- Footer -->
  <footer class="footer d-flex justify-content-between bg-light mt-5 d-print-none" width="100vw" height="2em">
    <a class="small text-decoration-none text-dark" href="https://domvwt.github.io/esparto/" style="margin-left: 10vw; padding: 0.3em; font-family: 'Carter One', cursive;">
      esparto
    </a>
    <div id="share-button" class="text-dark" style="margin-right: 10vw; padding: 0.3em;">
        <a class="text-decoration-none" href="#share-button">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black" class="bi bi-share" viewBox="0 0 16 16">
                <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/>
            </svg>
        </a>
    </div>
  </footer>

  <!-- JavaScript -->
  {% if tail_deps is defined and tail_deps|length %}
  {% for dep in tail_deps %}
  {{ dep }}
  {% endfor %}
  {% endif %}

  <!-- Share Document Script -->
  <script type="text/javascript">
      const getDocumentFile = function () {
          let filename = document.title + ".html"
          let docString = new XMLSerializer().serializeToString(document)
          let docFile = new File([docString], filename, { type: "text/html" })
          return docFile
      }

      const btn = document.getElementById('share-button');

      // Share must be triggered by "user activation"
      btn.addEventListener('click', async () => {
          try {
              let docFile = getDocumentFile()
              let shareData = { files: [docFile] }
              await navigator.share(shareData)
          } catch(err) {
              alert("Your system doesn't support sharing files.")
          }
      });
  </script>
</body>
</html>
